import{u,r as v,a as T,b as w,j as s,P as f,H as F,C as d,c as b}from"./index-BCkJtvyK.js";import{C as M}from"./CategoryFilter-SAcqBY7A.js";import{u as L,V as S}from"./ViewModeSelector-COSHS1l8.js";import{u as H}from"./useCategories-Bh5rlfRu.js";const P="_page_1ngy3_1",D="_header_1ngy3_5",V="_subtitle_1ngy3_10",k="_tagFilter_1ngy3_18",E="_tagFilterLabel_1ngy3_30",R="_tagFilterClear_1ngy3_35",B="_statBar_1ngy3_53",$="_statChip_1ngy3_61",I="_totalCount_1ngy3_76",O="_grid_1ngy3_83",A="_sections_1ngy3_90",G="_categorySection_1ngy3_96",Y="_sectionHeader_1ngy3_100",q="_sectionDot_1ngy3_109",z="_sectionTitle_1ngy3_116",J="_sectionCount_1ngy3_123",K="_sectionMore_1ngy3_128",Q="_toolbar_1ngy3_144",U="_boardList_1ngy3_151",W="_boardHeader_1ngy3_157",X="_boardRow_1ngy3_168",Z="_boardColNum_1ngy3_185",ss="_boardColTitle_1ngy3_193",es="_boardTags_1ngy3_205",as="_boardColCat_1ngy3_214",ts="_boardColView_1ngy3_222",os="_boardColDate_1ngy3_230",ns="_blogList_1ngy3_239",ls="_blogItem_1ngy3_245",cs="_blogCategory_1ngy3_260",is="_blogTitle_1ngy3_268",rs="_blogExcerpt_1ngy3_277",ds="_blogMeta_1ngy3_290",gs="_blogTags_1ngy3_298",_s="_empty_1ngy3_303",a={page:P,header:D,subtitle:V,tagFilter:k,tagFilterLabel:E,tagFilterClear:R,statBar:B,statChip:$,totalCount:I,grid:O,sections:A,categorySection:G,sectionHeader:Y,sectionDot:q,sectionTitle:z,sectionCount:J,sectionMore:K,toolbar:Q,boardList:U,boardHeader:W,boardRow:X,boardColNum:Z,boardColTitle:ss,boardTags:es,boardColCat:as,boardColView:ts,boardColDate:os,blogList:ns,blogItem:ls,blogCategory:cs,blogTitle:is,blogExcerpt:rs,blogMeta:ds,blogTags:gs,empty:_s};function Cs(){const[y,m]=u(),l=y.get("tag")||"",[i,g]=v.useState(""),[_,j]=L("poems"),h=T(),{categories:x}=H(),{poems:n,loading:C}=w(l?void 0:i||void 0,void 0,!l,l||void 0),N=e=>{g(e),l&&m({})},p=()=>{m({})},r=[];if(!i&&n.length>0){const e=new Map;for(const t of n){const c=e.get(t.category)||[];c.push(t),e.set(t.category,c)}const o=x.map(t=>t.name);for(const t of o){const c=e.get(t);c&&c.length>0&&r.push({name:t,poems:c})}for(const[t,c]of e)o.includes(t)||r.push({name:t,poems:c})}return s.jsxs(f,{children:[s.jsxs(F,{children:[s.jsx("title",{children:"추천 시(詩) — 好海"}),s.jsx("meta",{name:"description",content:"好海 이성헌 시인의 추천 시 모음"})]}),s.jsx("div",{className:a.page,children:s.jsxs("div",{className:"container",children:[s.jsxs("div",{className:a.header,children:[s.jsx("h1",{className:"section-title",style:{display:"inline-block"},children:"추천 시(詩)"}),s.jsx("p",{className:a.subtitle,children:"마음을 담아 쓴 시를 만나보세요"})]}),s.jsx("div",{className:a.toolbar,children:s.jsx(S,{mode:_,onChange:j})}),s.jsx(M,{categories:x,selected:i,onSelect:N}),l&&s.jsxs("div",{className:a.tagFilter,children:[s.jsxs("span",{className:a.tagFilterLabel,children:["#",l]})," 태그 시 ",n.length,"편",s.jsx("button",{className:a.tagFilterClear,onClick:p,children:"✕"})]}),!C&&!i&&r.length>1&&s.jsxs("div",{className:a.statBar,children:[r.map(e=>s.jsxs("button",{className:a.statChip,style:{background:`${d[e.name]||"#888"}18`,color:d[e.name]||"var(--text-muted)",borderColor:`${d[e.name]||"#888"}40`},onClick:()=>g(e.name),children:[e.name," ",e.poems.length]},e.name)),s.jsxs("span",{className:a.totalCount,children:["전체 ",n.length,"편"]})]}),C?s.jsx("p",{className:a.empty,children:"불러오는 중..."}):n.length>0?_==="board"?s.jsxs("div",{className:a.boardList,children:[s.jsxs("div",{className:a.boardHeader,children:[s.jsx("span",{className:a.boardColNum,children:"#"}),s.jsx("span",{className:a.boardColTitle,children:"제목"}),s.jsx("span",{className:a.boardColCat,children:"카테고리"}),s.jsx("span",{className:a.boardColView,children:"조회"}),s.jsx("span",{className:a.boardColDate,children:"날짜"})]}),n.map((e,o)=>s.jsxs("div",{className:a.boardRow,onClick:()=>h(`/poems/${e.id}`),children:[s.jsx("span",{className:a.boardColNum,children:o+1}),s.jsxs("span",{className:a.boardColTitle,children:[e.title,e.tags&&e.tags.length>0&&s.jsx("span",{className:a.boardTags,children:e.tags.slice(0,2).map(t=>s.jsxs("span",{children:["#",t]},t))})]}),s.jsx("span",{className:a.boardColCat,style:{color:d[e.category]},children:e.category}),s.jsx("span",{className:a.boardColView,children:e.view_count||0}),s.jsx("span",{className:a.boardColDate,children:e.written_date||""})]},e.id))]}):_==="blog"?s.jsx("div",{className:a.blogList,children:n.map(e=>s.jsxs("article",{className:a.blogItem,onClick:()=>h(`/poems/${e.id}`),children:[s.jsx("span",{className:a.blogCategory,style:{color:d[e.category]},children:e.category}),s.jsx("h3",{className:a.blogTitle,children:e.title}),s.jsx("p",{className:a.blogExcerpt,children:e.excerpt||e.content.split(`
`).slice(0,4).join(`
`)}),s.jsxs("div",{className:a.blogMeta,children:[e.tags&&e.tags.length>0&&s.jsx("span",{className:a.blogTags,children:e.tags.slice(0,4).map(o=>s.jsxs("span",{children:["#",o]},o))}),s.jsxs("span",{children:["조회 ",e.view_count??0]}),e.written_date&&s.jsx("span",{children:e.written_date})]})]},e.id))}):i?s.jsx("div",{className:a.grid,children:n.map((e,o)=>s.jsx(b,{poem:e,index:o},e.id))}):r.length>1?s.jsx("div",{className:a.sections,children:r.map(e=>s.jsxs("section",{className:a.categorySection,children:[s.jsxs("div",{className:a.sectionHeader,children:[s.jsx("span",{className:a.sectionDot,style:{background:d[e.name]}}),s.jsx("h2",{className:a.sectionTitle,children:e.name}),s.jsxs("span",{className:a.sectionCount,children:[e.poems.length,"편"]}),s.jsx("button",{className:a.sectionMore,onClick:()=>g(e.name),children:"전체 보기 →"})]}),s.jsx("div",{className:a.grid,children:e.poems.slice(0,6).map((o,t)=>s.jsx(b,{poem:o,index:t},o.id))})]},e.name))}):s.jsx("div",{className:a.grid,children:n.map((e,o)=>s.jsx(b,{poem:e,index:o},e.id))}):s.jsx("p",{className:a.empty,children:l?`"#${l}" 태그의 시가 없습니다.`:i?"이 카테고리에 추천 시가 없습니다.":"아직 추천 시가 없습니다."})]})})]})}export{Cs as default};
