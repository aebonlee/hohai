import{e as v,r as i,a as T,b as w,j as e,P as g,H as L,L as k,C as _,c as f}from"./index-BCkJtvyK.js";import{P as R}from"./PoemReaderMode-CXBNQk-R.js";import{C as S}from"./CategoryFilter-SAcqBY7A.js";import{u as I,V as M}from"./ViewModeSelector-COSHS1l8.js";import{u as P}from"./useCategories-Bh5rlfRu.js";import{a as V}from"./useSeries-DLciTVRs.js";import"./LyricsEffects-Aor13UAq.js";const D="_page_epb1x_1",E="_backLink_epb1x_5",H="_header_epb1x_19",O="_subtitle_epb1x_24",B="_toolbar_epb1x_32",$="_readerBtn_epb1x_40",A="_grid_epb1x_66",F="_boardList_epb1x_73",G="_boardHeader_epb1x_79",Y="_boardRow_epb1x_90",q="_boardColNum_epb1x_102",z="_boardColTitle_epb1x_110",J="_boardColCat_epb1x_119",K="_boardColView_epb1x_127",Q="_boardColDate_epb1x_135",U="_boardTags_epb1x_143",W="_blogList_epb1x_155",X="_blogItem_epb1x_161",Z="_blogCategory_epb1x_171",ee="_blogTitle_epb1x_179",ae="_blogExcerpt_epb1x_187",se="_blogMeta_epb1x_198",te="_blogTags_epb1x_206",oe="_empty_epb1x_211",a={page:D,backLink:E,header:H,subtitle:O,toolbar:B,readerBtn:$,grid:A,boardList:F,boardHeader:G,boardRow:Y,boardColNum:q,boardColTitle:z,boardColCat:J,boardColView:K,boardColDate:Q,boardTags:U,blogList:W,blogItem:X,blogCategory:Z,blogTitle:ee,blogExcerpt:ae,blogMeta:se,blogTags:te,empty:oe};function xe(){const{slug:p}=v(),{series:t,loading:m}=V(p),[r,h]=i.useState(""),[j,c]=i.useState(!1),[C,N]=i.useState(0),[n,u]=I("poemSeriesDetail"),d=T(),{categories:y}=P(),{poems:o,loading:b}=w(r||void 0,t==null?void 0:t.id,!1,void 0,!!(t!=null&&t.id));return m?e.jsx(g,{children:e.jsx("div",{className:a.page,children:e.jsx("div",{className:"container",children:e.jsx("p",{className:a.empty,children:"불러오는 중..."})})})}):e.jsxs(g,{children:[e.jsxs(L,{children:[e.jsxs("title",{children:[(t==null?void 0:t.name)||"시집"," — 好海"]}),e.jsx("meta",{name:"description",content:(t==null?void 0:t.description)||"好海 이성헌 시인의 시"})]}),e.jsx("div",{className:a.page,children:e.jsxs("div",{className:"container",children:[e.jsx(k,{to:"/poem-series",className:a.backLink,children:"← 시집 목록"}),e.jsxs("div",{className:a.header,children:[e.jsx("h1",{className:"section-title",style:{display:"inline-block"},children:(t==null?void 0:t.name)||"시집"}),(t==null?void 0:t.description)&&e.jsx("p",{className:a.subtitle,children:t.description})]}),e.jsxs("div",{className:a.toolbar,children:[o.length>0&&!b&&e.jsx("button",{className:a.readerBtn,onClick:()=>{N(0),c(!0)},children:"읽기 모드"}),e.jsx(M,{mode:n,onChange:u})]}),e.jsx(S,{categories:y,selected:r,onSelect:h}),b?e.jsx("p",{className:a.empty,children:"불러오는 중..."}):o.length>0?n==="board"?e.jsxs("div",{className:a.boardList,children:[e.jsxs("div",{className:a.boardHeader,children:[e.jsx("span",{className:a.boardColNum,children:"#"}),e.jsx("span",{className:a.boardColTitle,children:"제목"}),e.jsx("span",{className:a.boardColCat,children:"카테고리"}),e.jsx("span",{className:a.boardColView,children:"조회"}),e.jsx("span",{className:a.boardColDate,children:"날짜"})]}),o.map((s,l)=>e.jsxs("div",{className:a.boardRow,onClick:()=>d(`/poems/${s.id}`),children:[e.jsx("span",{className:a.boardColNum,children:l+1}),e.jsxs("span",{className:a.boardColTitle,children:[s.title,s.tags&&s.tags.length>0&&e.jsx("span",{className:a.boardTags,children:s.tags.slice(0,2).map(x=>e.jsxs("span",{children:["#",x]},x))})]}),e.jsx("span",{className:a.boardColCat,style:{color:_[s.category]},children:s.category}),e.jsx("span",{className:a.boardColView,children:s.view_count||0}),e.jsx("span",{className:a.boardColDate,children:s.written_date||""})]},s.id))]}):n==="blog"?e.jsx("div",{className:a.blogList,children:o.map(s=>e.jsxs("article",{className:a.blogItem,onClick:()=>d(`/poems/${s.id}`),children:[e.jsx("span",{className:a.blogCategory,style:{color:_[s.category]},children:s.category}),e.jsx("h3",{className:a.blogTitle,children:s.title}),e.jsx("p",{className:a.blogExcerpt,children:s.excerpt||s.content.split(`
`).slice(0,4).join(`
`)}),e.jsxs("div",{className:a.blogMeta,children:[s.tags&&s.tags.length>0&&e.jsx("span",{className:a.blogTags,children:s.tags.slice(0,4).map(l=>e.jsxs("span",{children:["#",l]},l))}),e.jsxs("span",{children:["조회 ",s.view_count??0]}),s.written_date&&e.jsx("span",{children:s.written_date})]})]},s.id))}):e.jsx("div",{className:a.grid,children:o.map((s,l)=>e.jsx(f,{poem:s,index:l},s.id))}):e.jsx("p",{className:a.empty,children:r?"이 카테고리에 등록된 시가 없습니다.":"아직 이 시집에 등록된 시가 없습니다."})]})}),e.jsx(R,{poems:o,initialIndex:C,seriesName:t==null?void 0:t.name,isOpen:j,onClose:()=>c(!1)})]})}export{xe as default};
