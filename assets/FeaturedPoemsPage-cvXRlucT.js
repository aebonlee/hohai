import{u as y,r as v,a as T,b as f,j as s,P as F,H as M,C as d,c as g}from"./index-CUPqXICw.js";import{C as L}from"./CategoryFilter-Bz0hN2Zn.js";import{u as w,V as S}from"./ViewModeSelector-t_xehQhE.js";import{u as H}from"./useCategories-BtLIXIS-.js";const P="_page_3u4ud_1",D="_header_3u4ud_5",k="_subtitle_3u4ud_10",E="_tagFilter_3u4ud_18",R="_tagFilterLabel_3u4ud_30",B="_tagFilterClear_3u4ud_35",$="_statBar_3u4ud_53",I="_statChip_3u4ud_61",O="_totalCount_3u4ud_76",V="_grid_3u4ud_83",A="_sections_3u4ud_90",G="_categorySection_3u4ud_96",Y="_sectionHeader_3u4ud_100",q="_sectionDot_3u4ud_109",z="_sectionTitle_3u4ud_116",J="_sectionCount_3u4ud_123",K="_sectionMore_3u4ud_128",Q="_toolbar_3u4ud_144",U="_boardList_3u4ud_151",W="_boardHeader_3u4ud_157",X="_boardRow_3u4ud_168",Z="_boardColNum_3u4ud_185",ss="_boardColTitle_3u4ud_193",es="_boardTags_3u4ud_205",as="_boardColCat_3u4ud_214",ts="_boardColDate_3u4ud_222",os="_blogList_3u4ud_231",ls="_blogItem_3u4ud_237",cs="_blogCategory_3u4ud_252",ns="_blogTitle_3u4ud_260",is="_blogExcerpt_3u4ud_269",rs="_blogMeta_3u4ud_282",ds="_blogTags_3u4ud_290",_s="_empty_3u4ud_295",a={page:P,header:D,subtitle:k,tagFilter:E,tagFilterLabel:R,tagFilterClear:B,statBar:$,statChip:I,totalCount:O,grid:V,sections:A,categorySection:G,sectionHeader:Y,sectionDot:q,sectionTitle:z,sectionCount:J,sectionMore:K,toolbar:Q,boardList:U,boardHeader:W,boardRow:X,boardColNum:Z,boardColTitle:ss,boardTags:es,boardColCat:as,boardColDate:ts,blogList:os,blogItem:ls,blogCategory:cs,blogTitle:ns,blogExcerpt:is,blogMeta:rs,blogTags:ds,empty:_s};function hs(){const[C,m]=y(),c=C.get("tag")||"",[i,_]=v.useState(""),[u,j]=w("poems"),b=T(),{categories:h}=H(),{poems:l,loading:x}=f(c?void 0:i||void 0,void 0,!c,c||void 0),p=e=>{_(e),c&&m({})},N=()=>{m({})},r=[];if(!i&&l.length>0){const e=new Map;for(const t of l){const n=e.get(t.category)||[];n.push(t),e.set(t.category,n)}const o=h.map(t=>t.name);for(const t of o){const n=e.get(t);n&&n.length>0&&r.push({name:t,poems:n})}for(const[t,n]of e)o.includes(t)||r.push({name:t,poems:n})}return s.jsxs(F,{children:[s.jsxs(M,{children:[s.jsx("title",{children:"추천 시(詩) — 好海"}),s.jsx("meta",{name:"description",content:"好海 이성헌 시인의 추천 시 모음"})]}),s.jsx("div",{className:a.page,children:s.jsxs("div",{className:"container",children:[s.jsxs("div",{className:a.header,children:[s.jsx("h1",{className:"section-title",style:{display:"inline-block"},children:"추천 시(詩)"}),s.jsx("p",{className:a.subtitle,children:"마음을 담아 쓴 시를 만나보세요"})]}),s.jsx("div",{className:a.toolbar,children:s.jsx(S,{mode:u,onChange:j})}),s.jsx(L,{categories:h,selected:i,onSelect:p}),c&&s.jsxs("div",{className:a.tagFilter,children:[s.jsxs("span",{className:a.tagFilterLabel,children:["#",c]})," 태그 시 ",l.length,"편",s.jsx("button",{className:a.tagFilterClear,onClick:N,children:"✕"})]}),!x&&!i&&r.length>1&&s.jsxs("div",{className:a.statBar,children:[r.map(e=>s.jsxs("button",{className:a.statChip,style:{background:`${d[e.name]||"#888"}18`,color:d[e.name]||"var(--text-muted)",borderColor:`${d[e.name]||"#888"}40`},onClick:()=>_(e.name),children:[e.name," ",e.poems.length]},e.name)),s.jsxs("span",{className:a.totalCount,children:["전체 ",l.length,"편"]})]}),x?s.jsx("p",{className:a.empty,children:"불러오는 중..."}):l.length>0?u==="board"?s.jsxs("div",{className:a.boardList,children:[s.jsxs("div",{className:a.boardHeader,children:[s.jsx("span",{className:a.boardColNum,children:"#"}),s.jsx("span",{className:a.boardColTitle,children:"제목"}),s.jsx("span",{className:a.boardColCat,children:"카테고리"}),s.jsx("span",{className:a.boardColDate,children:"날짜"})]}),l.map((e,o)=>s.jsxs("div",{className:a.boardRow,onClick:()=>b(`/poems/${e.id}`),children:[s.jsx("span",{className:a.boardColNum,children:o+1}),s.jsxs("span",{className:a.boardColTitle,children:[e.title,e.tags&&e.tags.length>0&&s.jsx("span",{className:a.boardTags,children:e.tags.slice(0,2).map(t=>s.jsxs("span",{children:["#",t]},t))})]}),s.jsx("span",{className:a.boardColCat,style:{color:d[e.category]},children:e.category}),s.jsx("span",{className:a.boardColDate,children:e.written_date||""})]},e.id))]}):u==="blog"?s.jsx("div",{className:a.blogList,children:l.map(e=>s.jsxs("article",{className:a.blogItem,onClick:()=>b(`/poems/${e.id}`),children:[s.jsx("span",{className:a.blogCategory,style:{color:d[e.category]},children:e.category}),s.jsx("h3",{className:a.blogTitle,children:e.title}),s.jsx("p",{className:a.blogExcerpt,children:e.excerpt||e.content.split(`
`).slice(0,4).join(`
`)}),s.jsxs("div",{className:a.blogMeta,children:[e.tags&&e.tags.length>0&&s.jsx("span",{className:a.blogTags,children:e.tags.slice(0,4).map(o=>s.jsxs("span",{children:["#",o]},o))}),e.written_date&&s.jsx("span",{children:e.written_date})]})]},e.id))}):i?s.jsx("div",{className:a.grid,children:l.map((e,o)=>s.jsx(g,{poem:e,index:o},e.id))}):r.length>1?s.jsx("div",{className:a.sections,children:r.map(e=>s.jsxs("section",{className:a.categorySection,children:[s.jsxs("div",{className:a.sectionHeader,children:[s.jsx("span",{className:a.sectionDot,style:{background:d[e.name]}}),s.jsx("h2",{className:a.sectionTitle,children:e.name}),s.jsxs("span",{className:a.sectionCount,children:[e.poems.length,"편"]}),s.jsx("button",{className:a.sectionMore,onClick:()=>_(e.name),children:"전체 보기 →"})]}),s.jsx("div",{className:a.grid,children:e.poems.slice(0,6).map((o,t)=>s.jsx(g,{poem:o,index:t},o.id))})]},e.name))}):s.jsx("div",{className:a.grid,children:l.map((e,o)=>s.jsx(g,{poem:e,index:o},e.id))}):s.jsx("p",{className:a.empty,children:c?`"#${c}" 태그의 시가 없습니다.`:i?"이 카테고리에 추천 시가 없습니다.":"아직 추천 시가 없습니다."})]})})]})}export{hs as default};
