import{r as e,s as c}from"./index-BvDDahVw.js";function S(){const[t,a]=e.useState([]),[i,r]=e.useState(!0);return e.useEffect(()=>{(async()=>{const{data:u}=await c.from("hohai_series").select("*").eq("type","poem").eq("is_published",!0).order("display_order",{ascending:!0});a(u||[]),r(!1)})()},[]),{series:t,loading:i}}function p(){const[t,a]=e.useState([]),[i,r]=e.useState(!0);return e.useEffect(()=>{(async()=>{const{data:u}=await c.from("hohai_series").select("*").eq("type","song").eq("is_published",!0).order("display_order",{ascending:!0});a(u||[]),r(!1)})()},[]),{series:t,loading:i}}function g(t){const[a,i]=e.useState(null),[r,s]=e.useState(!0);return e.useEffect(()=>{if(!t)return;(async()=>{s(!0);const{data:d}=await c.from("hohai_series").select("*").eq("slug",t).single();i(d||null),s(!1)})()},[t]),{series:a,loading:r}}function y(){const[t,a]=e.useState([]),[i,r]=e.useState(!0),s=e.useCallback(async()=>{r(!0);const{data:n}=await c.from("hohai_series").select("*").order("type",{ascending:!0}).order("display_order",{ascending:!0});a(n||[]),r(!1)},[]);return e.useEffect(()=>{s()},[s]),{series:t,loading:i,createSeries:async n=>{const{error:o}=await c.from("hohai_series").insert(n);return o||await s(),{error:o}},updateSeries:async(n,o)=>{const{error:f}=await c.from("hohai_series").update(o).eq("id",n);return f||await s(),{error:f}},deleteSeries:async n=>{const{error:o}=await c.from("hohai_series").delete().eq("id",n);return o||await s(),{error:o}},refetch:s}}export{g as a,p as b,y as c,S as u};
