import{f as Q,w as U,n as V,o as W,r as l,j as e,P as X,H as Y,m as Z}from"./index-BvDDahVw.js";const ee="_page_p5wk1_1",se="_header_p5wk1_7",ne="_pageTitle_p5wk1_11",te="_pageDesc_p5wk1_18",ae="_loading_p5wk1_24",ie="_layout_p5wk1_32",le="_sidebar_p5wk1_39",ce="_sidebarList_p5wk1_47",oe="_sidebarItem_p5wk1_53",re="_active_p5wk1_73",de="_sidebarIcon_p5wk1_78",_e="_sidebarName_p5wk1_83",me="_sidebarCount_p5wk1_90",pe="_newPlaylistBtn_p5wk1_99",ge="_sidebarCreate_p5wk1_117",ue="_sidebarInput_p5wk1_123",he="_sidebarCreateBtns_p5wk1_138",we="_main_p5wk1_144",xe="_playlistHeader_p5wk1_149",ye="_playlistTitleRow_p5wk1_153",Ne="_playlistName_p5wk1_160",ke="_songCount_p5wk1_167",je="_renameForm_p5wk1_175",be="_renameInput_p5wk1_181",fe="_actions_p5wk1_194",Be="_actionBtn_p5wk1_201",ve="_actionActive_p5wk1_222",Ce="_actionsDivider_p5wk1_228",Ie="_actionBtnMuted_p5wk1_234",Pe="_actionBtnDanger_p5wk1_248",Te="_confirmBtn_p5wk1_263",De="_cancelBtn_p5wk1_284",Re="_songList_p5wk1_300",Se="_songRow_p5wk1_309",Le="_songRowPlaying_p5wk1_326",He="_songIndex_p5wk1_330",Me="_songPlayBtn_p5wk1_343",$e="_songInfo_p5wk1_369",Ee="_songTitle_p5wk1_377",Fe="_songDesc_p5wk1_390",Ae="_songTags_p5wk1_398",Ke="_songTag_p5wk1_398",Oe="_removeBtn_p5wk1_413",qe="_emptyState_p5wk1_440",ze="_emptyHint_p5wk1_451",s={page:ee,header:se,pageTitle:ne,pageDesc:te,loading:ae,layout:ie,sidebar:le,sidebarList:ce,sidebarItem:oe,active:re,sidebarIcon:de,sidebarName:_e,sidebarCount:me,newPlaylistBtn:pe,sidebarCreate:ge,sidebarInput:ue,sidebarCreateBtns:he,main:we,playlistHeader:xe,playlistTitleRow:ye,playlistName:Ne,songCount:ke,renameForm:je,renameInput:be,actions:fe,actionBtn:Be,actionActive:ve,actionsDivider:Ce,actionBtnMuted:Ie,actionBtnDanger:Pe,confirmBtn:Te,cancelBtn:De,songList:Re,songRow:Se,songRowPlaying:Le,songIndex:He,songPlayBtn:Me,songInfo:$e,songTitle:Ee,songDesc:Fe,songTags:Ae,songTag:Ke,removeBtn:Oe,emptyState:qe,emptyHint:ze};function Qe(){const{user:u}=Q(),{playlists:o,loading:v,createPlaylist:C,updatePlaylist:I,deletePlaylist:P,removeSongFromPlaylist:T}=U(),{songs:h,loading:D}=V(),{currentId:R,setPlaylist:w,play:x,playShuffled:S,repeatMode:i,setRepeatMode:m}=W(),[L,p]=l.useState(null),[H,r]=l.useState(!1),[g,y]=l.useState(""),[M,d]=l.useState(!1),[_,N]=l.useState(""),t=o.find(n=>n.id===L)||null||(o.length>0?o[0]:null),k=l.useMemo(()=>{const n=new Map;return h.forEach(c=>n.set(c.id,c)),n},[h]),a=l.useMemo(()=>t?t.song_ids.map(n=>k.get(n)).filter(n=>!!n):[],[t,k]),j=async()=>{if(!_.trim()||!u)return;const{data:n}=await C({user_id:u.id,name:_.trim()});n&&p(n.id),N(""),d(!1)},b=async()=>{!t||!g.trim()||(await I(t.id,{name:g.trim()}),r(!1))},$=async()=>{t&&confirm(`"${t.name}" ì¬ìƒëª©ë¡ì„ ì‚­ì œí• ê¹Œìš”?`)&&(await P(t.id),p(null))},E=async n=>{t&&await T(t.id,n)},F=n=>{a.length>0&&w(a),x(n)},A=()=>{a.length!==0&&(m("all"),w(a),x(a[0].id))},K=()=>{a.length!==0&&(m("all"),S(a))},O=()=>{const n=["none","all","one"],c=n[(n.indexOf(i)+1)%n.length];m(c)},q=i==="one"?"í•œê³¡ ë°˜ë³µ":i==="all"?"ì „ì²´ ë°˜ë³µ":"ë°˜ë³µ ë”",z=i==="one"?"ğŸ”‚":"ğŸ”",G=i==="none"?"ì „ì²´ ë°˜ë³µìœ¼ë¡œ ì „í™˜":i==="all"?"í•œê³¡ ë°˜ë³µìœ¼ë¡œ ì „í™˜":"ë°˜ë³µì„ ë•ë‹ˆë‹¤",J=v||D;return e.jsxs(X,{children:[e.jsx(Y,{children:e.jsx("title",{children:"ë‚´ ì¬ìƒëª©ë¡ | å¥½æµ·"})}),e.jsxs(Z.div,{className:s.page,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{className:s.header,children:[e.jsx("h1",{className:s.pageTitle,children:"ë‚´ ì¬ìƒëª©ë¡"}),e.jsx("p",{className:s.pageDesc,children:"ë‚˜ë§Œì˜ ìŒì•… ì¬ìƒëª©ë¡ì„ ë§Œë“¤ì–´ ë³´ì„¸ìš”"})]}),J?e.jsx("div",{className:s.loading,children:e.jsx("div",{className:"loading-spinner"})}):e.jsxs("div",{className:s.layout,children:[e.jsxs("aside",{className:s.sidebar,children:[e.jsx("div",{className:s.sidebarList,children:o.map(n=>e.jsxs("button",{className:`${s.sidebarItem} ${(t==null?void 0:t.id)===n.id?s.active:""}`,onClick:()=>p(n.id),title:"í´ë¦­í•˜ë©´ ì´ ì¬ìƒëª©ë¡ì˜ ê³¡ ëª©ë¡ì„ ë´…ë‹ˆë‹¤",children:[e.jsx("span",{className:s.sidebarIcon,children:"â™«"}),e.jsx("span",{className:s.sidebarName,children:n.name}),e.jsx("span",{className:s.sidebarCount,children:n.song_ids.length})]},n.id))}),M?e.jsxs("div",{className:s.sidebarCreate,children:[e.jsx("input",{className:s.sidebarInput,type:"text",value:_,onChange:n=>N(n.target.value),onKeyDown:n=>{n.key==="Enter"&&j(),n.key==="Escape"&&d(!1)},placeholder:"ì¬ìƒëª©ë¡ ì´ë¦„",autoFocus:!0,maxLength:50}),e.jsxs("div",{className:s.sidebarCreateBtns,children:[e.jsx("button",{className:s.confirmBtn,onClick:j,disabled:!_.trim(),children:"í™•ì¸"}),e.jsx("button",{className:s.cancelBtn,onClick:()=>d(!1),children:"ì·¨ì†Œ"})]})]}):e.jsx("button",{className:s.newPlaylistBtn,onClick:()=>d(!0),title:"ìƒˆë¡œìš´ ì¬ìƒëª©ë¡ì„ ë§Œë“­ë‹ˆë‹¤",children:"+ ìƒˆ ì¬ìƒëª©ë¡"})]}),e.jsx("main",{className:s.main,children:t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:s.playlistHeader,children:[e.jsxs("div",{className:s.playlistTitleRow,children:[H?e.jsxs("div",{className:s.renameForm,children:[e.jsx("input",{className:s.renameInput,type:"text",value:g,onChange:n=>y(n.target.value),onKeyDown:n=>{n.key==="Enter"&&b(),n.key==="Escape"&&r(!1)},autoFocus:!0,maxLength:50}),e.jsx("button",{className:s.confirmBtn,onClick:b,children:"í™•ì¸"}),e.jsx("button",{className:s.cancelBtn,onClick:()=>r(!1),children:"ì·¨ì†Œ"})]}):e.jsx("h2",{className:s.playlistName,children:t.name}),e.jsxs("span",{className:s.songCount,children:[a.length,"ê³¡"]})]}),e.jsxs("div",{className:s.actions,children:[e.jsx("button",{className:s.actionBtn,onClick:A,disabled:a.length===0,title:"ì¬ìƒëª©ë¡ì˜ ëª¨ë“  ê³¡ì„ ì²˜ìŒë¶€í„° ì´ì–´ì„œ ì¬ìƒí•©ë‹ˆë‹¤",children:"â–¶ ì „ì²´ì¬ìƒ"}),e.jsx("button",{className:s.actionBtn,onClick:K,disabled:a.length===0,title:"ê³¡ ìˆœì„œë¥¼ ë¬´ì‘ìœ„ë¡œ ì„ì–´ì„œ ì¬ìƒí•©ë‹ˆë‹¤",children:"ğŸ”€ ì…”í”Œ"}),e.jsxs("button",{className:`${s.actionBtn} ${i!=="none"?s.actionActive:""}`,onClick:O,title:G,children:[z," ",q]}),e.jsx("div",{className:s.actionsDivider}),e.jsx("button",{className:s.actionBtnMuted,onClick:()=>{y(t.name),r(!0)},title:"ì¬ìƒëª©ë¡ ì´ë¦„ì„ ë³€ê²½í•©ë‹ˆë‹¤",children:"ì´ë¦„ë³€ê²½"}),e.jsx("button",{className:s.actionBtnDanger,onClick:$,title:"ì´ ì¬ìƒëª©ë¡ì„ ì‚­ì œí•©ë‹ˆë‹¤",children:"ì‚­ì œ"})]})]}),a.length===0?e.jsxs("div",{className:s.emptyState,children:[e.jsx("p",{children:"ì¬ìƒëª©ë¡ì´ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤"}),e.jsxs("p",{className:s.emptyHint,children:["ë…¸ë˜ ì¹´ë“œì˜ ",e.jsx("strong",{children:"â˜†"})," ë²„íŠ¼ìœ¼ë¡œ ê³¡ì„ ì¶”ê°€í•´ ë³´ì„¸ìš”"]})]}):e.jsx("ul",{className:s.songList,children:a.map((n,c)=>{const f=R===n.id;return e.jsxs("li",{className:`${s.songRow} ${f?s.songRowPlaying:""}`,children:[e.jsx("span",{className:s.songIndex,children:c+1}),e.jsx("button",{className:s.songPlayBtn,onClick:()=>F(n.id),"aria-label":`${n.title} ì¬ìƒ`,title:"ì¬ìƒ",children:f?"â¸":"â–¶"}),e.jsxs("div",{className:s.songInfo,children:[e.jsx("span",{className:s.songTitle,children:n.title}),n.description&&e.jsx("span",{className:s.songDesc,children:n.description})]}),n.tags&&n.tags.length>0&&e.jsx("div",{className:s.songTags,children:n.tags.slice(0,3).map(B=>e.jsxs("span",{className:s.songTag,children:["#",B]},B))}),e.jsx("button",{className:s.removeBtn,onClick:()=>E(n.id),"aria-label":`${n.title} ì œê±°`,title:"ì¬ìƒëª©ë¡ì—ì„œ ì œê±°",children:"âœ•"})]},n.id)})})]}):e.jsxs("div",{className:s.emptyState,children:[e.jsx("p",{children:"ì¬ìƒëª©ë¡ì„ ë§Œë“¤ì–´ ë³´ì„¸ìš”"}),e.jsx("p",{className:s.emptyHint,children:'ì™¼ìª½ì˜ "ìƒˆ ì¬ìƒëª©ë¡" ë²„íŠ¼ì„ ëˆŒëŸ¬ ì‹œì‘í•˜ì„¸ìš”'})]})})]})]})]})}export{Qe as default};
