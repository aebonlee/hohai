import{f as Q,w as U,n as V,o as W,r as i,j as e,P as X,H as Y,m as Z}from"./index-Dq0PCZmx.js";const ee="_page_1llf4_1",se="_header_1llf4_13",ne="_pageTitle_1llf4_21",te="_pageDesc_1llf4_35",ae="_loading_1llf4_47",le="_layout_1llf4_63",ie="_sidebar_1llf4_77",ce="_sidebarList_1llf4_93",oe="_sidebarItem_1llf4_105",re="_active_1llf4_145",de="_sidebarIcon_1llf4_155",_e="_sidebarName_1llf4_165",me="_sidebarCount_1llf4_179",ge="_newPlaylistBtn_1llf4_197",ue="_sidebarCreate_1llf4_233",fe="_sidebarInput_1llf4_245",pe="_sidebarCreateBtns_1llf4_275",he="_main_1llf4_287",xe="_playlistHeader_1llf4_297",ye="_playlistTitleRow_1llf4_305",Ne="_playlistName_1llf4_319",je="_songCount_1llf4_333",be="_renameForm_1llf4_349",Be="_renameInput_1llf4_361",ve="_actions_1llf4_387",Ce="_actionBtn_1llf4_401",Ie="_actionActive_1llf4_443",we="_actionsDivider_1llf4_455",Pe="_actionBtnMuted_1llf4_467",Te="_actionBtnDanger_1llf4_495",De="_confirmBtn_1llf4_525",ke="_cancelBtn_1llf4_567",Re="_songList_1llf4_599",Se="_songRow_1llf4_617",Le="_songRowPlaying_1llf4_651",He="_songIndex_1llf4_659",Me="_songPlayBtn_1llf4_685",$e="_songInfo_1llf4_737",Ee="_songTitle_1llf4_753",Fe="_songDesc_1llf4_779",Ae="_songTags_1llf4_795",Ke="_songTag_1llf4_795",Oe="_removeBtn_1llf4_825",qe="_emptyState_1llf4_879",ze="_emptyHint_1llf4_901",s={page:ee,header:se,pageTitle:ne,pageDesc:te,loading:ae,layout:le,sidebar:ie,sidebarList:ce,sidebarItem:oe,active:re,sidebarIcon:de,sidebarName:_e,sidebarCount:me,newPlaylistBtn:ge,sidebarCreate:ue,sidebarInput:fe,sidebarCreateBtns:pe,main:he,playlistHeader:xe,playlistTitleRow:ye,playlistName:Ne,songCount:je,renameForm:be,renameInput:Be,actions:ve,actionBtn:Ce,actionActive:Ie,actionsDivider:we,actionBtnMuted:Pe,actionBtnDanger:Te,confirmBtn:De,cancelBtn:ke,songList:Re,songRow:Se,songRowPlaying:Le,songIndex:He,songPlayBtn:Me,songInfo:$e,songTitle:Ee,songDesc:Fe,songTags:Ae,songTag:Ke,removeBtn:Oe,emptyState:qe,emptyHint:ze};function Qe(){const{user:f}=Q(),{playlists:o,loading:I,createPlaylist:w,updatePlaylist:P,deletePlaylist:T,removeSongFromPlaylist:D}=U(),{songs:p,loading:k}=V(),{currentId:R,setPlaylist:h,play:x,playShuffled:S,repeatMode:l,setRepeatMode:m}=W(),[L,g]=i.useState(null),[H,r]=i.useState(!1),[u,y]=i.useState(""),[M,d]=i.useState(!1),[_,N]=i.useState(""),t=o.find(n=>n.id===L)||null||(o.length>0?o[0]:null),j=i.useMemo(()=>{const n=new Map;return p.forEach(c=>n.set(c.id,c)),n},[p]),a=i.useMemo(()=>t?t.song_ids.map(n=>j.get(n)).filter(n=>!!n):[],[t,j]),b=async()=>{if(!_.trim()||!f)return;const{data:n}=await w({user_id:f.id,name:_.trim()});n&&g(n.id),N(""),d(!1)},B=async()=>{!t||!u.trim()||(await P(t.id,{name:u.trim()}),r(!1))},$=async()=>{t&&confirm(`"${t.name}" ì¬ìƒëª©ë¡ì„ ì‚­ì œí• ê¹Œìš”?`)&&(await T(t.id),g(null))},E=async n=>{t&&await D(t.id,n)},F=n=>{a.length>0&&h(a),x(n)},A=()=>{a.length!==0&&(m("all"),h(a),x(a[0].id))},K=()=>{a.length!==0&&(m("all"),S(a))},O=()=>{const n=["none","all","one"],c=n[(n.indexOf(l)+1)%n.length];m(c)},q=l==="one"?"í•œê³¡ ë°˜ë³µ":l==="all"?"ì „ì²´ ë°˜ë³µ":"ë°˜ë³µ ë”",z=l==="one"?"ğŸ”‚":"ğŸ”",G=l==="none"?"ì „ì²´ ë°˜ë³µìœ¼ë¡œ ì „í™˜":l==="all"?"í•œê³¡ ë°˜ë³µìœ¼ë¡œ ì „í™˜":"ë°˜ë³µì„ ë•ë‹ˆë‹¤",J=I||k;return e.jsxs(X,{children:[e.jsx(Y,{children:e.jsx("title",{children:"ë‚´ ì¬ìƒëª©ë¡ | å¥½æµ·"})}),e.jsxs(Z.div,{className:s.page,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{className:s.header,children:[e.jsx("h1",{className:s.pageTitle,children:"ë‚´ ì¬ìƒëª©ë¡"}),e.jsx("p",{className:s.pageDesc,children:"ë‚˜ë§Œì˜ ìŒì•… ì¬ìƒëª©ë¡ì„ ë§Œë“¤ì–´ ë³´ì„¸ìš”"})]}),J?e.jsx("div",{className:s.loading,children:e.jsx("div",{className:"loading-spinner"})}):e.jsxs("div",{className:s.layout,children:[e.jsxs("aside",{className:s.sidebar,children:[e.jsx("div",{className:s.sidebarList,children:o.map(n=>e.jsxs("button",{className:`${s.sidebarItem} ${(t==null?void 0:t.id)===n.id?s.active:""}`,onClick:()=>g(n.id),title:"í´ë¦­í•˜ë©´ ì´ ì¬ìƒëª©ë¡ì˜ ê³¡ ëª©ë¡ì„ ë´…ë‹ˆë‹¤",children:[e.jsx("span",{className:s.sidebarIcon,children:"â™«"}),e.jsx("span",{className:s.sidebarName,children:n.name}),e.jsx("span",{className:s.sidebarCount,children:n.song_ids.length})]},n.id))}),M?e.jsxs("div",{className:s.sidebarCreate,children:[e.jsx("input",{className:s.sidebarInput,type:"text",value:_,onChange:n=>N(n.target.value),onKeyDown:n=>{n.key==="Enter"&&b(),n.key==="Escape"&&d(!1)},placeholder:"ì¬ìƒëª©ë¡ ì´ë¦„",autoFocus:!0,maxLength:50}),e.jsxs("div",{className:s.sidebarCreateBtns,children:[e.jsx("button",{className:s.confirmBtn,onClick:b,disabled:!_.trim(),children:"í™•ì¸"}),e.jsx("button",{className:s.cancelBtn,onClick:()=>d(!1),children:"ì·¨ì†Œ"})]})]}):e.jsx("button",{className:s.newPlaylistBtn,onClick:()=>d(!0),title:"ìƒˆë¡œìš´ ì¬ìƒëª©ë¡ì„ ë§Œë“­ë‹ˆë‹¤",children:"+ ìƒˆ ì¬ìƒëª©ë¡"})]}),e.jsx("main",{className:s.main,children:t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:s.playlistHeader,children:[e.jsxs("div",{className:s.playlistTitleRow,children:[H?e.jsxs("div",{className:s.renameForm,children:[e.jsx("input",{className:s.renameInput,type:"text",value:u,onChange:n=>y(n.target.value),onKeyDown:n=>{n.key==="Enter"&&B(),n.key==="Escape"&&r(!1)},autoFocus:!0,maxLength:50}),e.jsx("button",{className:s.confirmBtn,onClick:B,children:"í™•ì¸"}),e.jsx("button",{className:s.cancelBtn,onClick:()=>r(!1),children:"ì·¨ì†Œ"})]}):e.jsx("h2",{className:s.playlistName,children:t.name}),e.jsxs("span",{className:s.songCount,children:[a.length,"ê³¡"]})]}),e.jsxs("div",{className:s.actions,children:[e.jsx("button",{className:s.actionBtn,onClick:A,disabled:a.length===0,title:"ì¬ìƒëª©ë¡ì˜ ëª¨ë“  ê³¡ì„ ì²˜ìŒë¶€í„° ì´ì–´ì„œ ì¬ìƒí•©ë‹ˆë‹¤",children:"â–¶ ì „ì²´ì¬ìƒ"}),e.jsx("button",{className:s.actionBtn,onClick:K,disabled:a.length===0,title:"ê³¡ ìˆœì„œë¥¼ ë¬´ì‘ìœ„ë¡œ ì„ì–´ì„œ ì¬ìƒí•©ë‹ˆë‹¤",children:"ğŸ”€ ì…”í”Œ"}),e.jsxs("button",{className:`${s.actionBtn} ${l!=="none"?s.actionActive:""}`,onClick:O,title:G,children:[z," ",q]}),e.jsx("div",{className:s.actionsDivider}),e.jsx("button",{className:s.actionBtnMuted,onClick:()=>{y(t.name),r(!0)},title:"ì¬ìƒëª©ë¡ ì´ë¦„ì„ ë³€ê²½í•©ë‹ˆë‹¤",children:"ì´ë¦„ë³€ê²½"}),e.jsx("button",{className:s.actionBtnDanger,onClick:$,title:"ì´ ì¬ìƒëª©ë¡ì„ ì‚­ì œí•©ë‹ˆë‹¤",children:"ì‚­ì œ"})]})]}),a.length===0?e.jsxs("div",{className:s.emptyState,children:[e.jsx("p",{children:"ì¬ìƒëª©ë¡ì´ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤"}),e.jsxs("p",{className:s.emptyHint,children:["ë…¸ë˜ ì¹´ë“œì˜ ",e.jsx("strong",{children:"â˜†"})," ë²„íŠ¼ìœ¼ë¡œ ê³¡ì„ ì¶”ê°€í•´ ë³´ì„¸ìš”"]})]}):e.jsx("ul",{className:s.songList,children:a.map((n,c)=>{const v=R===n.id;return e.jsxs("li",{className:`${s.songRow} ${v?s.songRowPlaying:""}`,children:[e.jsx("span",{className:s.songIndex,children:c+1}),e.jsx("button",{className:s.songPlayBtn,onClick:()=>F(n.id),"aria-label":`${n.title} ì¬ìƒ`,title:"ì¬ìƒ",children:v?"â¸":"â–¶"}),e.jsxs("div",{className:s.songInfo,children:[e.jsx("span",{className:s.songTitle,children:n.title}),n.description&&e.jsx("span",{className:s.songDesc,children:n.description})]}),n.tags&&n.tags.length>0&&e.jsx("div",{className:s.songTags,children:n.tags.slice(0,3).map(C=>e.jsxs("span",{className:s.songTag,children:["#",C]},C))}),e.jsx("button",{className:s.removeBtn,onClick:()=>E(n.id),"aria-label":`${n.title} ì œê±°`,title:"ì¬ìƒëª©ë¡ì—ì„œ ì œê±°",children:"âœ•"})]},n.id)})})]}):e.jsxs("div",{className:s.emptyState,children:[e.jsx("p",{children:"ì¬ìƒëª©ë¡ì„ ë§Œë“¤ì–´ ë³´ì„¸ìš”"}),e.jsx("p",{className:s.emptyHint,children:'ì™¼ìª½ì˜ "ìƒˆ ì¬ìƒëª©ë¡" ë²„íŠ¼ì„ ëˆŒëŸ¬ ì‹œì‘í•˜ì„¸ìš”'})]})})]})]})]})}export{Qe as default};
